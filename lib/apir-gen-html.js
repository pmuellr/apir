// Generated by CoffeeScript 1.6.3
var PROGRAM, fs, gen_html, path;

fs = require("fs");

path = require("path");

gen_html = require("./apir-gen-html");

PROGRAM = path.basename(__filename);

PROGRAM = (PROGRAM.match(/(.*)\..*/))[1];

exports.process = function(api, options) {
  var htmlContent, htmlFile, logger, outFile, output;
  output = options.output, logger = options.logger;
  logger = logger.newLogger(PROGRAM);
  htmlFile = path.join(__dirname, "apir-gen-html.html");
  htmlContent = fs.readFileSync(htmlFile, "utf8");
  htmlContent = htmlContent.replace(/%api-title%/g, api.title);
  htmlContent = htmlContent.replace(/%api-json%/g, JSON.stringify(api, null, 4));
  outFile = "" + output + ".html";
  logger.log("generating " + outFile);
  return fs.writeFileSync(outFile, htmlContent);
};
